(this["webpackJsonpdemographic-app"]=this["webpackJsonpdemographic-app"]||[]).push([[0],{126:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(12),o=a.n(l),s=(a(65),a(7));var c=function(e){var t=Object(n.useState)(""),a=Object(s.a)(t,2),l=a[0],o=a[1];return r.a.createElement("div",null,r.a.createElement("form",{className:"searchForm",onSubmit:function(e){e.preventDefault();var t=document.getElementsByClassName("submitBtn");13===e.keyCode&&t[0].click()}},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",name:"search",placeholder:"Paste Image URL here",onChange:function(e){o(e.target.value),console.log(e.target.value)},value:l}),r.a.createElement("button",{className:"btn btn-secondary submitBtn",type:"submit",onClick:function(){e.imageurl(l),o("")}},"Submit"))))},i=a(17),u=a.n(i);var m=function(e){var t=e.sendResults,a=e.height;return void 0!==t.concepts?r.a.createElement("div",{className:"resultTable",style:{marginTop:a+20}},r.a.createElement("h4",null,"Results"),r.a.createElement("table",{className:"table table-hover"},r.a.createElement("caption",null,"Prediction made using Clarifai"),r.a.createElement("thead",null,r.a.createElement("tr",{className:"table-light"},r.a.createElement("th",{scope:"col"},"Categories"),r.a.createElement("th",{scope:"col"},"Value"),r.a.createElement("th",{scope:"col"},"Confidence"))),r.a.createElement("tbody",null,r.a.createElement("tr",{className:"table-info"},r.a.createElement("th",{scope:"row"},"Age"),r.a.createElement("td",null,t.concepts[0].name),r.a.createElement("td",null,Math.round(100*t.concepts[0].value)+"%")),r.a.createElement("tr",{className:"table-info"},r.a.createElement("th",{scope:"row"},"Gender"),r.a.createElement("td",null,u.a.upperFirst(t.concepts[1].name)),r.a.createElement("td",null,Math.round(100*t.concepts[1].value)+"%")),r.a.createElement("tr",{className:"table-info"},r.a.createElement("th",{scope:"row"},"Race"),r.a.createElement("td",null,u.a.upperFirst(t.concepts[2].name)),r.a.createElement("td",null,Math.round(100*t.concepts[2].value)+"%"))))):r.a.createElement("div",null)};var d=function(e){var t=e.image,a=e.loadedImage,n=e.boundValue;return r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"image"},r.a.createElement("img",{id:"image",onLoad:function(){var e=document.getElementById("image").width,t=document.getElementById("image").height;a(e,t)},src:t,alt:""}),r.a.createElement("div",{className:"bounding-box",style:{top:n[0],right:n[1],bottom:n[2],left:n[3]}})))};var p=function(){var e=(new Date).getFullYear();return r.a.createElement("footer",{className:"footer"},r.a.createElement("h6",null,r.a.createElement("a",{href:"http://ugoarubaleze.com/"},r.a.createElement("span",null,r.a.createElement("i",{className:"fas fa-code"})," by Ugo Arubaleze ",e))))},b=a(57);var f=function(e){var t=e.errorMessage;return r.a.createElement("div",{className:"errorReport"},r.a.createElement(b.d,{show:!0,fade:!0,iconClassName:"text-danger",title:t.apiName+" error",message:t.data,text:"Code "+t.status}))},g=a(6),E=a.n(g),h=a(28),v=a.n(h);a(123).config();var N=function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],l=t[1],o=Object(n.useState)([]),i=Object(s.a)(o,2),b=i[0],g=i[1],h=Object(n.useState)([]),N=Object(s.a)(h,2),O=N[0],y=N[1],j=Object(n.useState)(0),C=Object(s.a)(j,2),I=C[0],S=C[1],w=Object(n.useState)({}),_=Object(s.a)(w,2),x=_[0],A=_[1],P=Object(n.useState)(!1),k=Object(s.a)(P,2),R=k[0],M=k[1],q=Object(n.useState)(),B=Object(s.a)(q,2),D=B[0],T=B[1],F=new v.a.App({apiKey:"dbe78b3e59a44d60b6399bf6175813a1"});function L(e,t,a){var n=e[0].region_info.bounding_box.left_col*t,r=e[0].region_info.bounding_box.top_row*a,l=t-e[0].region_info.bounding_box.right_col*t,o=a-e[0].region_info.bounding_box.bottom_row*a,s=[];s.push(r,l,o,n),g(s),y(e[0].data),S(a)}return r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,u.a.upperCase("Demographic Predictor")),r.a.createElement(c,{imageurl:function(e){T(!0),setTimeout((function(){l(e),T(!1)}),1e3),g([]),M(!1),y([])}}),r.a.createElement("h5",null,"OR"),r.a.createElement("button",{className:"randomBtn btn btn-secondary",onClick:function(){l(""),E()({method:"get",url:"https://api.unsplash.com/photos/random?client_id=6c6aa4aeaaacba7f565d998823cec7f4cb07ab3d1cfa9b6b8efffa557a57681a",params:{count:1,query:"portrait"}}).then((function(e){var t=e.data[0].urls.full;T(!0),setTimeout((function(){l(t),T(!1)}),1e3),g([]),M(!1),y([])})).catch((function(e){if(e.response){var t={data:e.response.data,status:e.response.status,apiName:"Unsplash API"};A(t),M(!0)}else if(e.request){console.log(e.request);var a={data:e.request.data,status:e.request.status,apiName:"Unsplash API"};A(a),M(!0)}else console.log("Error",e.message),alert("An Error Occured")}))}},"Random Image"),r.a.createElement("div",null,D?r.a.createElement("div",{className:"spinner-border text-info",style:{width:60,height:60,marginTop:100},role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")):r.a.createElement(d,{image:a,loadedImage:function(e,t){F.models.predict(v.a.DEMOGRAPHICS_MODEL,a,{maxConcepts:1}).then((function(a){if(a.outputs[0].data.regions)L(a.outputs[0].data.regions,e,t);else{A({data:"Poor facial data / no data error",status:"404",apiName:"Clarifai API"}),M(!0),L(0,0,0)}})).catch((function(e){if(e.response){console.log(e.response.data.status.description),console.log(e.response.status);var t={data:e.response.data.status.description,status:e.response.status,apiName:"Clarifai API"};A(t),M(!0)}else if(e.request){console.log(e.request);var a={data:e.response.data.status.description,status:e.response.status,apiName:"Clarifai API"};A(a),M(!0)}}))},boundValue:b})),R?r.a.createElement("div",null,r.a.createElement(f,{errorMessage:x})):r.a.createElement("div",null,r.a.createElement(m,{sendResults:O,height:I})),r.a.createElement(p,null))},O=a(55),y=a(56),j=a(59),C=a(58),I=function(e){Object(j.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(O.a)(this,a),(n=t.call(this,e)).state={error:null,errorInfo:null},n}return Object(y.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,errorInfo:t})}},{key:"render",value:function(){return this.state.errorInfo?r.a.createElement("div",{style:{textAlign:"center",marginTop:100}},r.a.createElement("h2",null,"Something went wrong."),r.a.createElement("details",{style:{whiteSpace:"pre-wrap"}},this.state.error&&this.state.error.toString(),r.a.createElement("br",null),this.state.errorInfo.componentStack)):this.props.children}}]),a}(r.a.Component);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(I,null,r.a.createElement(N,null))),document.getElementById("root"))},60:function(e,t,a){e.exports=a(126)},65:function(e,t,a){}},[[60,1,2]]]);
//# sourceMappingURL=main.afd3b644.chunk.js.map